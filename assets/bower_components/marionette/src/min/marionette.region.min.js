Marionette.Region=function(e){if(this.options=e||{},this.el=this.getOption("el"),this.el=this.el instanceof Backbone.$?this.el[0]:this.el,!this.el)throw new Marionette.Error({name:"NoElError",message:'An "el" must be specified for a region.'});if(this.$el=this.getEl(this.el),this.initialize){var t=slice.apply(arguments);this.initialize.apply(this,t)}},_.extend(Marionette.Region,{buildRegion:function(e,t){if(_.isString(e))return this._buildRegionFromSelector(e,t);if(e.selector||e.el||e.regionClass)return this._buildRegionFromObject(e,t);if(_.isFunction(e))return this._buildRegionFromRegionClass(e);throw new Marionette.Error({message:"Improper region configuration type.",url:"marionette.region.html#region-configuration-types"})},_buildRegionFromSelector:function(e,t){return new t({el:e})},_buildRegionFromObject:function(e,t){var i=e.regionClass||t,r=_.omit(e,"selector","regionClass");e.selector&&!r.el&&(r.el=e.selector);var n=new i(r);return e.parentEl&&(n.getEl=function(t){if(_.isObject(t))return Backbone.$(t);var i=e.parentEl;return _.isFunction(i)&&(i=i()),i.find(t)}),n},_buildRegionFromRegionClass:function(e){return new e}}),_.extend(Marionette.Region.prototype,Backbone.Events,{show:function(e,t){this._ensureElement();var i=t||{},r=e!==this.currentView,n=!!i.preventDestroy,o=!!i.forceShow,s=!!this.currentView,h=!n&&r,l=r||o;return s&&this.triggerMethod("before:swapOut",this.currentView),h&&this.empty(),l?(e.once("destroy",_.bind(this.empty,this)),e.render(),s&&this.triggerMethod("before:swap",e),this.triggerMethod("before:show",e),Marionette.triggerMethodOn(e,"before:show"),s&&this.triggerMethod("swapOut",this.currentView),this.attachHtml(e),this.currentView=e,s&&this.triggerMethod("swap",e),this.triggerMethod("show",e),Marionette.triggerMethodOn(e,"show"),this):this},_ensureElement:function(){if(_.isObject(this.el)||(this.$el=this.getEl(this.el),this.el=this.$el[0]),!this.$el||0===this.$el.length)throw new Marionette.Error('An "el" '+this.$el.selector+" must exist in DOM")},getEl:function(e){return Backbone.$(e)},attachHtml:function(e){this.el.innerHTML="",this.el.appendChild(e.el)},empty:function(){var e=this.currentView;if(e)return this.triggerMethod("before:empty",e),this._destroyView(),this.triggerMethod("empty",e),delete this.currentView,this},_destroyView:function(){var e=this.currentView;e.destroy&&!e.isDestroyed?e.destroy():e.remove&&e.remove()},attachView:function(e){return this.currentView=e,this},hasView:function(){return!!this.currentView},reset:function(){return this.empty(),this.$el&&(this.el=this.$el.selector),delete this.$el,this},getOption:Marionette.proxyGetOption,triggerMethod:Marionette.triggerMethod}),Marionette.Region.extend=Marionette.extend;