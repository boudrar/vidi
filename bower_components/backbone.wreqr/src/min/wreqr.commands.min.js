Wreqr.Commands=function(t){"use strict";return t.Handlers.extend({storageType:t.CommandStorage,constructor:function(e){this.options=e||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var s=Array.prototype.slice.call(arguments);t.Handlers.prototype.constructor.apply(this,s)},execute:function(t,e){t=arguments[0],e=Array.prototype.slice.call(arguments,1),this.hasHandler(t)?this.getHandler(t).apply(this,e):this.storage.addCommand(t,e)},_executeCommands:function(t,e,s){var a=this.storage.getCommands(t);_.each(a.instances,function(t){e.apply(s,t)}),this.storage.clearCommands(t)},_initializeStorage:function(t){var e,s=t.storageType||this.storageType;e=_.isFunction(s)?new s:s,this.storage=e}})}(Wreqr);