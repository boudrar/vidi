Marionette.RegionManager=function(e){var t=e.Controller.extend({constructor:function(t){this._regions={},e.Controller.call(this,t)},addRegions:function(e,t){_.isFunction(e)&&(e=e.apply(this,arguments));var n={};return _.each(e,function(e,i){_.isString(e)&&(e={selector:e}),e.selector&&(e=_.defaults({},e,t));var o=this.addRegion(i,e);n[i]=o},this),n},addRegion:function(t,n){var i;return i=n instanceof e.Region?n:e.Region.buildRegion(n,e.Region),this.triggerMethod("before:add:region",t,i),this._store(t,i),this.triggerMethod("add:region",t,i),i},get:function(e){return this._regions[e]},getRegions:function(){return _.clone(this._regions)},removeRegion:function(e){var t=this._regions[e];return this._remove(e,t),t},removeRegions:function(){var e=this.getRegions();return _.each(this._regions,function(e,t){this._remove(t,e)},this),e},emptyRegions:function(){var e=this.getRegions();return _.each(e,function(e){e.empty()},this),e},destroy:function(){return this.removeRegions(),e.Controller.prototype.destroy.apply(this,arguments)},_store:function(e,t){this._regions[e]=t,this._setLength()},_remove:function(e,t){this.triggerMethod("before:remove:region",e,t),t.empty(),t.stopListening(),delete this._regions[e],this._setLength(),this.triggerMethod("remove:region",e,t)},_setLength:function(){this.length=_.size(this._regions)}});return e.actAsCollection(t.prototype,"_regions"),t}(Marionette);