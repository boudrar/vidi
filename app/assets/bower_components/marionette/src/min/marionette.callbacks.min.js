Marionette.Callbacks=function(){this._deferred=Marionette.Deferred(),this._callbacks=[]},_.extend(Marionette.Callbacks.prototype,{add:function(e,t){var c=_.result(this._deferred,"promise");this._callbacks.push({cb:e,ctx:t}),c.then(function(c){t&&(c.context=t),e.call(c.context,c.options)})},run:function(e,t){this._deferred.resolve({options:e,context:t})},reset:function(){var e=this._callbacks;this._deferred=Marionette.Deferred(),this._callbacks=[],_.each(e,function(e){this.add(e.cb,e.ctx)},this)}});